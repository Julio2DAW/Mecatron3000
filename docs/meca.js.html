<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: meca.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: meca.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
  meca.js
  Controlador principal del juego MecaTRON - 3000
  @author Julio Antonio Ramos Gago &lt;jramosgago.guadalupe@alumnado.fundacionloyola.net>
  @license GPL v3 2021
**/

'use strict'

class Juego {
  /** 
   *  Constructor de la clase juego
  **/
  constructor() {
    this.vista = new Vista()
    this.modelo = new Modelo()
    this.generadorPalabras = null
    this.animador = null
    this.divPrincipal = null
    window.onload = this.iniciar.bind(this)
  }

  /**
    Pone en marcha el juego
  **/
  iniciar(){
    console.log('Iniciando ... ')
    this.divPrincipal = document.getElementById('divPrincipal')
    this.vista.div = this.divPrincipal
    this.generadorPalabras = window.setInterval(this.generarPalabra.bind(this), 1000)
    this.animador = window.setInterval(this.vista.moverPalabras.bind(this.vista), 100)
  }

  generarPalabra(){
    let nuevaPalabra = this.modelo.crearPalabra()
    this.vista.dibujar(nuevaPalabra)
  }
}

class Vista {
  constructor(){
    this.div = null
  }

  /**
    Dibuja el area del juego
    @param palabra {String} la nueva palabra
  */
  dibujar(palabra){
    // &lt;div class=palabra>Meca&lt;/div>
    let div = document.createElement('div')
    this.div.appendChild(div)
    div.appendChild(document.createTextNode(palabra))
    div.classList.add('palabra')
    div.style.top = '0px'
    div.style.left = Math.floor(Math.random() * 85) + '%'
  }

  /**
    Mueve las palabras del juego
  **/
  moverPalabras(){
    //Buscar todas las palabras del divPrincipal
    let palabras = this.div.querySelectorAll('.palabra')
    console.log(palabras)

    //Para cada palabra, aumento su atributo top
    for(let palabra of palabras){
      let top = parseInt(palabra.style.top)
      top += 5
      palabra.style.top = `${top}px`
    }

    //TODO: Si ha llegado al suelo...

  }
}
/**
  Modelo de datos del juego
*/
class Modelo {
  constructor(){
    this.palabras = ['En', 'un', 'lugar', 'de', 'La', 'Mancha']
  }
  /**
    Devuelve una nueva palabra
    @return {String} Palabra generada
  **/
  crearPalabra(){
    return this.palabras[Math.floor(Math.random() * this.palabras.length)]
  }
}

var app = new Juego()
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Juego.html">Juego</a></li><li><a href="Modelo.html">Modelo</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Fri Nov 12 2021 10:50:50 GMT+0100 (hora est√°ndar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
